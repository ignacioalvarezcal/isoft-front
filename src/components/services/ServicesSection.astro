---
import type { Service } from "../../data/isoft";
import { Cpu, Zap, Brain, Shield, Database, BarChart3 } from "lucide-astro";

interface Props {
  services: Service[];
}

const { services } = Astro.props as Props;

const getServiceIcon = (type: Service["icon"]) => {
  switch (type) {
    case "cpu":
      return Cpu;
    case "zap":
      return Zap;
    case "brain":
      return Brain;
    case "shield":
      return Shield;
    case "db":
      return Database;
    case "chart":
      return BarChart3;
  }
};
---

<section class="section services-section" id="servicios">
  <div class="section-inner">
    <div id="services-title" data-animate class="section-title fade-in-up">
      <div class="section-title__label">Servicios</div>
      <h2 class="section-title__heading">
        Soluciones <span class="text-gradient">Integrales</span>
      </h2>
      <p class="section-title__subtitle">
        Tecnología de vanguardia diseñada para impulsar el crecimiento
        empresarial
      </p>
    </div>

    <div class="grid grid--services">
      {
        services.map((service, index) => {
          const Icon = getServiceIcon(service.icon);
          return (
            /* MODIFICADO: Agregamos h-full y block al enlace para que llene la celda */
            <a
              href={service.slug}
              class="service-card-link block h-full"
              data-astro-prefetch
            >
              <article
                id={`service-${index}`}
                data-animate
                class="service-card fade-in-up flex flex-col h-full"
                style={`transition-delay: ${index * 100}ms`}
              >
                <div class="services-card-icon-wrapper mb-4">
                  <Icon />
                </div>

                <h3 class="services-card-title">{service.title}</h3>

                {/* NUEVO: Subtítulo. Usamos service.subtitle (asegúrate de tenerlo en tu data) */}
                {/* Ajusta las clases de color (text-cyan-400) según tu paleta */}
                {service.subtitle && (
                  <span class="text-sm font-semibold text-cyan-400 mb-3 block uppercase tracking-wider">
                    {service.subtitle}
                  </span>
                )}

                {/* MODIFICADO: flex-grow hace que el texto o el espacio inferior se expanda 
                    para que todas las tarjetas terminen en la misma línea visualmente si quisieras 
                    alinear un botón al final, pero aquí ayuda a la estructura */}
                <p class="services-card-text flex-grow">
                  {service.description}
                </p>
              </article>
            </a>
          );
        })
      }
    </div>
  </div>
</section>
